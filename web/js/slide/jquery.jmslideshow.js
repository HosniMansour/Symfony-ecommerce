!function(s){s.JMSlideshow=function(t,i){this.$el=s(i),this._init(t)},s.JMSlideshow.defaults={jmpressOpts:{viewPort:{height:400,width:1e3,maxScale:1},fullscreen:!1,hash:{use:!1},mouse:{clickSelects:!1},keyboard:{use:!1},animation:{transitionDuration:"1s"}},arrows:!0,dots:!0,bgColorSpeed:"1s",autoplay:!1,interval:3500},s.JMSlideshow.prototype={_init:function(t){this.options=s.extend(!0,{},s.JMSlideshow.defaults,t),this.$slides=s("#jms-slideshow").children("div"),this.slidesCount=this.$slides.length,this.colors=s.map(this.$slides,function(t){return s(t).data("color")}).join(" "),this._layout(),this._initImpress(),this._loadEvents(),this.options.autoplay&&this._startSlideshow()},_layout:function(){if(this.$slides.each(function(t){s(this).addClass("jmstep"+(t+1))}),this.$jmsWrapper=this.$slides.wrapAll('<div class="jms-wrapper"/>').parent(),this.$jmsWrapper.css({"-webkit-transition-duration":this.options.bgColorSpeed,"-moz-transition-duration":this.options.bgColorSpeed,"-ms-transition-duration":this.options.bgColorSpeed,"-o-transition-duration":this.options.bgColorSpeed,"transition-duration":this.options.bgColorSpeed}),this.options.arrows&&(this.$arrows=s('<nav class="jms-arrows"></nav>'),this.slidesCount>1&&(this.$arrowPrev=s('<span class="jms-arrows-prev"/>').appendTo(this.$arrows),this.$arrowNext=s('<span class="jms-arrows-next"/>').appendTo(this.$arrows)),this.$el.append(this.$arrows)),this.options.dots){this.$dots=s('<nav class="jms-dots"></nav>');for(var t=this.slidesCount+1;--t;)this.$dots.append(t===this.slidesCount?'<span class="jms-dots-current"/>':"<span/>");this.options.jmpressOpts.start&&(this.$start=this.$jmsWrapper.find(this.options.jmpressOpts.start),idxSelected=0,this.$start.length?idxSelected=this.$start.index():this.options.jmpressOpts.start=null,this.$dots.children().removeClass("jms-dots-current").eq(idxSelected).addClass("jms-dots-current")),this.$el.append(this.$dots)}},_initImpress:function(){var s=this;this.$jmsWrapper.jmpress(this.options.jmpressOpts),this.$jmsWrapper.jmpress("setActive",function(t){s.options.dots&&s.$dots.children().removeClass("jms-dots-current").eq(t.index()).addClass("jms-dots-current"),this.removeClass(s.colors),this.addClass(t.data("color"))}),this.$jmsWrapper.addClass(this.$jmsWrapper.jmpress("active").data("color"))},_startSlideshow:function(){var s=this;this.slideshow=setTimeout(function(){s.$jmsWrapper.jmpress("next"),s.options.autoplay&&s._startSlideshow()},this.options.interval)},_stopSlideshow:function(){this.options.autoplay&&(clearTimeout(this.slideshow),this.options.autoplay=!1)},_loadEvents:function(){var t=this;this.$arrowPrev&&this.$arrowNext&&(this.$arrowPrev.on("click.jmslideshow",function(){return t._stopSlideshow(),t.$jmsWrapper.jmpress("prev"),!1}),this.$arrowNext.on("click.jmslideshow",function(){return t._stopSlideshow(),t.$jmsWrapper.jmpress("next"),!1})),this.$dots&&this.$dots.children().on("click.jmslideshow",function(){return t._stopSlideshow(),t.$jmsWrapper.jmpress("goTo",".jmstep"+(s(this).index()+1)),!1}),this.$jmsWrapper.on("touchend.jmslideshow",function(){t._stopSlideshow()})}};var t=function(s){this.console&&console.error(s)};s.fn.jmslideshow=function(i){if("string"==typeof i){var o=Array.prototype.slice.call(arguments,1);this.each(function(){var e=s.data(this,"jmslideshow");return e?s.isFunction(e[i])&&"_"!==i.charAt(0)?void e[i].apply(e,o):void t("no such method '"+i+"' for jmslideshow instance"):void t("cannot call methods on jmslideshow prior to initialization; attempted to call method '"+i+"'")})}else this.each(function(){var t=s.data(this,"jmslideshow");t||s.data(this,"jmslideshow",new s.JMSlideshow(i,this))});return this}}(jQuery);